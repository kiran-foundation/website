---
import 'aos/dist/aos.css'
import 'jarallax/dist/jarallax.min.css'
import Layout from '../../layouts/Layout.astro'
import Update from '../../components/updates/update.astro';
import type { MarkdownFile } from '../../types/Markdown'

const { path } = Astro.params

export function getStaticPaths() {
  const updates = import.meta.glob<MarkdownFile>(
    "/src/content/updates/*.md",
  );
  let parameters = [];
  Object.entries(updates).forEach(([key,]) => {
    parameters.push({
      params: { path: key.split("/").pop()?.replace(".md", "") },
    });
  });
  console.log(parameters);
  
  return parameters;
}

---

<Layout title='Updates'>
  <main class='page-wrapper'>
    <Update path={path} />
  </main>
  <a
    class='btn-scroll-top'
    href='#top'
    data-scroll
    aria-label='Scroll back to top'
  >
    <svg
      viewBox='0 0 40 40'
      fill='currentColor'
      xmlns='http://www.w3.org/2000/svg'
    >
      <circle
        cx='20'
        cy='20'
        r='19'
        fill='none'
        stroke='currentColor'
        stroke-width='1.5'
        stroke-miterlimit='10'></circle>
    </svg>
    <i class='ai-arrow-up'></i>
  </a>
</Layout>

