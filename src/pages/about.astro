---
import "aos/dist/aos.css";
import "jarallax/dist/jarallax.min.css";
import Layout from "../layouts/Layout.astro";
import Hero from "../components/about/Hero.astro";
import Mission from "../components/about/Mission.astro";
import TestimonialsCarousel from "../components/common/TestimonialsCarousel.astro";
import Team from "../components/about/Team.astro";
import Heading from "../components/common/heading.astro";
import Gallery from "../components/about/Gallery.astro";
import { getEntry } from "astro:content";
import Introduction from "../components/about/Introduction.astro";
import PersonList from "../components/person-list/PersonList.astro";

// Handle missing testimonials entry gracefully
const testimonialsEntry = await getEntry("testimonials", "testimonials").catch(() => null);
const testimonials = testimonialsEntry?.data ?? { title: "Testimonials" };

interface Props {
  title: string;
}
---

<Layout>
  <main class="page-wrapper" style="overflow-x: hidden;">
    <Hero />
    <Introduction />
    <Mission />
    <Team />
    <PersonList
      foldername="work"
      path="team/"
      filter="Student"
      title="Student Members"
    />
    <Heading title={testimonials.title} />
    <TestimonialsCarousel pageTag="pratibha" />
    <Gallery />
  </main>

  <a
    class="btn-scroll-top"
    href="#top"
    data-scroll
    aria-label="Scroll back to top"
  >
    <svg viewBox="0 0 40 40" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
      <circle cx="20" cy="20" r="19" fill="none" stroke="currentColor" stroke-width="1.5" stroke-miterlimit="10"/>
    </svg>
    <i class="ai-arrow-up"></i>
  </a>
</Layout>