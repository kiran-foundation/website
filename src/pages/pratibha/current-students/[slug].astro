---
import { getCollection } from "astro:content";
import Layout from "../../../layouts/Layout.astro";
import Breadcrumb from "../../../components/common/Breadcrumb.astro";

export async function getStaticPaths() {
  const students = await getCollection("current-students");

  return students.map((student) => ({
    params: { slug: student.slug },
    props: { student },
  }));
}

const { student } = Astro.props;

// âœ… THIS IS IMPORTANT (markdown rendering)
const { Content } = await student.render();
---

<Layout title={student.data.name}>
  <main class="page-wrapper w-full">
    <Breadcrumb />

    <!-- ===== TOP PROFILE SECTION (FIGMA STYLE) ===== -->
    <section class="max-w-6xl mx-auto px-6 py-16 grid grid-cols-1 lg:grid-cols-2 gap-16 items-start">

      <!-- LEFT: IMAGE -->
      <div>
        <img
          src={student.data.image}
          alt={student.data.name}
          class="rounded-3xl w-full max-w-md"
        />
      </div>

      <!-- RIGHT: BASIC INFO -->
      <div>
        <h1 class="text-3xl font-semibold mb-2">
          {student.data.name}
        </h1>

        <p class="text-lg text-gray-600 mb-6">
          {student.data.role}
        </p>

        {student.data.social && (
          <a
            href={student.data.connectLink}
            target="_blank"
            class="inline-block px-6 py-3 border rounded-lg hover:bg-gray-100 transition"
          >
            {student.data.social}
          </a>
        )}
      </div>
    </section>

    <!-- ===== MARKDOWN CONTENT (ABOUT / AREA / MENTOR etc.) ===== -->
    <section class="max-w-3xl mx-auto px-6 pb-24">
      <article class="prose prose-lg mx-auto">
        <Content />
      </article>
    </section>

  </main>
</Layout>

<style>
  /* Match Figma typography */
  .prose h2 {
    font-size: 1.75rem;
    font-weight: 600;
    margin-top: 3rem;
    margin-bottom: 1rem;
  }

  .prose hr {
    margin: 3rem 0;
    border-color: #e5e7eb;
  }

  .prose blockquote {
    font-style: italic;
    color: #6b7280;
  }
</style>

