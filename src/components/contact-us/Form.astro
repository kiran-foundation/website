---
import { getEntry } from "astro:content"

const sr = await getEntry("contact", "form");
const { fullname_label, email_label, phone_label, more_label, button_label, thankyou_message,animation_path} = sr.data;


---

<script src="/assets/js/theme.min.js" is:inline></script>
<script type="module" src="/assets/js/common.js" is:inline></script>

<section id="form" class="bg-[#F1F1F1] max-w-[81rem] mx-auto   px-4 mb-[10.25rem] md:rounded-2xl">
  <div id="formframe" class=" mx-auto px-0 max-w-[50rem] py-[2.5rem] sm:pt-[7.5rem] sm:pb-[10.5rem] " style="display: block;">
    <h1 class="px-1 m-0 pb-[5rem] font-poppins !font-[500] text-center  !text-[24px] !md:text-[2rem] tracking-normal !leading-[100%]">Your questions, feedback or concerns matter!</h1>

    <form id="contact-form" class="  mx-0  ">
      <div class="volunteeringForm-input-container m-0  pt-0  pb-[3rem] ">
        <label for="full-name">{fullname_label}</label>
        <input
          type="text"
          id="full-name"
          name="full-name"
          placeholder="Your name"
        />
      </div>
      <div class="volunteeringForm-input-container m-0  pt-0  pb-[3rem]">
        <label for="email">{email_label} </label>
        <input type="text" id="email" name="email" placeholder="Your email" />
      </div>
      <div class="volunteeringForm-input-container m-0  pt-0  pb-[3rem]">
        <label for="phone">{phone_label}  </label>
        <input type="text" id="phone" name="phone" placeholder="Your number" />
      </div>
      <div class="volunteeringForm-input-container m-0  pt-0  pb-[2rem]">
        <label for="more">{more_label}  </label>
        <textarea id="more" name="more" rows="5"></textarea>
      </div>
      
      <button type="submit" class="volunteeringForm-submit-button form-submit-button font-poppins font-medium w-full sm:w-[11.375rem]  justify-center    items-center px-3 sm:px-5 md:px-6 m-0  text-center align-middle   text-base lg:text-lg rounded-md sm:rounded-md transition-all bg-[#D33C0D] text-white hover:bg-[#72321E] active:ring-2 active:ring-[#D33C0D] active:bg-[#72321E]  " 
        >{button_label}</button
      >
    </form>
  </div>
  <div id="pop-up" style="display: none;" class=" md:rounded-2xl bg-[#F1F1F1] max-w-[71rem]  mx-auto  " >
      <div class=" max-w-[50rem]  mx-auto   py-[8rem] overflow-hidden">

      <h1 class=" tracking-normal text-center font-poppins font-[600] text-[24px] md:text-[2rem] leading-[140%] ">{thankyou_message}</h1>
      <script
        src="https://unpkg.com/@lottiefiles/lottie-player@2.0.12/dist/lottie-player.js"
        type="module"></script>
        
        <lottie-player
        src={animation_path}
        background="transparent"
        speed="1"
        style="max-width: 25rem; max-height: 25rem; overflow: hidden; margin: auto;"
        direction="1"
        playMode="normal"
        autoplay
        id="lottie-player"
        >
        </lottie-player>  
    </div>
  </div>

  <script>
    const popUp = document.getElementById("pop-up");
    const lottiePlayer = document.getElementById("lottie-player") as any;

    const observer = new MutationObserver(() => {
      if (popUp.style.display === "block") {
        (lottiePlayer as any).stop();
        lottiePlayer.play();
      }
    });

    observer.observe(popUp, { attributes: true, attributeFilter: ["style"] });
  </script>
</section>
