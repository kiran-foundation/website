---
import { GA_PROD_ID, GA_TEST_ID } from "../../utils/config";
---

<script is:inline define:vars={{ GA_PROD_ID, GA_TEST_ID }}>

  const PROD_HOSTNAMES = [
    "kiran.foundation",
    "www.kiran.foundation",
  ];
  const hostname = window.location.hostname;
  const GA_TRACKING_ID = PROD_HOSTNAMES.includes(hostname)
    ? GA_PROD_ID
    : GA_TEST_ID;

  // Load GA script dynamically
  const script = document.createElement("script");
  script.async = true;
  script.src = `https://www.googletagmanager.com/gtag/js?id=${GA_TRACKING_ID}`;
  document.head.appendChild(script);

  // Init GA
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', GA_TRACKING_ID);
</script>
