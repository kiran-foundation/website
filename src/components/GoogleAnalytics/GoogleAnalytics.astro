---
import { GA_TEST_ID, GA_PROD_ID, isProduction } from "../../utils/config.ts";

const GA_TRACKING_ID = isProduction() ? GA_PROD_ID : GA_TEST_ID;
---

<!-- Load GA script -->
<script async src={"https://www.googletagmanager.com/gtag/js?id=" + GA_TRACKING_ID}></script>

<!-- Initialize only after it's loaded -->
<script is:inline>
  window.dataLayer = window.dataLayer || [];
  window.gtag = function () {
    dataLayer.push(arguments);
  };
  window.addEventListener("load", function () {
    gtag('js', new Date());
    gtag('config', '{{GA_TRACKING_ID}}'.replace("{{GA_TRACKING_ID}}", "{GA_TRACKING_ID}"));
  });
</script>
