---
import { getEntry } from "astro:content";
import Heading from "./Heading.astro";
import Button from "../common/button.astro";

const entry = (await getEntry("shakti", "pillars")) as any;

const pillars = entry?.data?.pillars ?? [];
---
<section class="mx-auto max-w-[1296px] pt-2 xl:pt-3 mt-[164px] box-border">
  <div class="flex flex-col lg:flex-row min-h-screen">
    
    <!-- Left Sticky Section -->
    <div class="lg:w-1/3">
      <div class="lg:sticky lg:top-28 lg:mt-[402px]">
        <Heading head="pillarHeading1" />
        <Heading head="pillarHeading2" />
        
        <Button
          link="/volunteering"
          title="See the Workshops Schedule"
          btn="btn1"
          widthClass="w-[342px] sm:w-[200px] md:w-[315px]"
          heightClass="h-[60px] sm:h-[55px] md:h-[60px]"
          className=""
        />
      </div>
    </div>

    <!-- Right Scrollable Pillar Cards -->
    <div class=":w-[855px] flex-shrink-0 overflow-y-auto overflow-x-hidden lg:ml-[132px] px-4 sm:px-4 ml-0 pb-16">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-x-8 gap-y-16">
        {pillars.map((pillar, index) => (
          <div
            class="group hover:shadow-xl hover:shadow-gray-400 transition duration-300 rounded-lg overflow-hidden bg-white w-[382px] h-[760px] px-6 pb-6 box-border flex flex-col"
          >
            <div class="w-full aspect-square bg-gray-100">
              <img src={pillar.image} alt={pillar.title} class="w-full h-full object-cover" />
            </div>

            <div class="flex flex-col flex-grow">
              <h3 class="font-medium text-[32px] leading-[100%] tracking-[0] font-poppins text-[#1E1E1E] mt-4">
                {pillar.title}
              </h3>
              <p class="font-normal text-[18px] leading-[36px] tracking-[0] font-poppins text-[#49494C] mt-4 mb-4">
                {pillar.text}
              </p>

              <div class="mt-auto">
                <Button
                  link={pillar.ctaLink}
                  title={pillar.buttonText}
                  btn="btn2"
                  widthClass="w-[342px] sm:w-[200px] md:w-[150px]"
                  heightClass="h-[60px] sm:h-[55px] md:h-[60px]"
                  className="mt-auto"
                />
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>


