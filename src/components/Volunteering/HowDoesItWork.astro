---
import { remark } from 'remark';
import html from 'remark-html';
const staticTextsFile = import.meta.glob("/src/content/volunteer/StaticTexts.md");

const volunteering = await Promise.all(
  Object.values(allVolunteering).map(async (volunteer) => {
    const { frontmatter, default: content } = await volunteer();
    const processedContent = await remark().use(html).process(content);
    return { ...frontmatter, content: processedContent.toString() };
  })
);

const staticTexts = await (async () => {
  const staticFilePath = Object.keys(staticTextsFile)[0];
  const staticFile = staticTextsFile[staticFilePath];

  if (staticFile) {
    const { frontmatter } = await staticFile();
    return frontmatter;
  } else {
    return null;
  }
})();

if (!staticTexts) {
  throw new Error('Static texts not found');
}

const { showHighPriorityOnly = false, isMainPage = false } = Astro.props;

const filteredVolunteering = volunteering
  .filter(volunteer => !showHighPriorityOnly || volunteer.priority === "high")
  .sort((a, b) => a.title.localeCompare(b.title));

const volunteeringToDisplay = showHighPriorityOnly ? filteredVolunteering.slice(0, 3) : filteredVolunteering;

const { chooseVolunteering, applyNow, seeMore, Requirements} = staticTexts;
---
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Volunteer</title>
  <link rel="stylesheet" href="/assets/css/Volunteering/HowDoesItWork.css">
</head>
<body>
  <div class="HowDoesItWork-frame">
    <h1>Participate and Contribute: Your Volunteer Path</h1>

    <div class="HowDoesItWork-container">
      <div class="HowDoesItWork-content">
        <h2>Discover your purpose:</h2>
        <p>Guide students to reach their potential.<br>
        Empower women through workshops.<br>
        Contribute 5-6 hours weekly.<br>
        Generate online awareness.<br>
        Aid fundraising for sustainable impact.</p>
      </div>
      <div class="HowDoesItWork-image">
        <img src="/assets/images/hero/hero-image.jpg" alt="Volunteer Image 1">
      </div>
    </div>

    <div class="HowDoesItWork-container">
      <div class="HowDoesItWork-image HowDoesItWork-image-medium">
        <img src="/assets/images/hero/hero-image.jpg" alt="Volunteer Image 2">
      </div>
      <div class="HowDoesItWork-content">
        <h2 style="font-family: Inter;">Connect, empower, grow.</h2>
        <p>Experience tangible change, personal growth.<br>
        See self-sufficiency in action.<br>
        Witness education and independence fuel transformation.</p>
      </div>
    </div>

    <div class="HowDoesItWork-container">
      <div class="HowDoesItWork-content">
        <h2>Benefits of Volunteering:</h2>
        <p>Earn official recognition for your commitment.<br>
        Develop skills through practical experience.<br>
        Experience personal growth while effecting change.<br>
        Forge meaningful connections with fellow volunteers.</p>
      </div>
      <div class="HowDoesItWork-image HowDoesItWork-image-medium">
        <img src="/assets/images/hero/hero-image.jpg" alt="Volunteer Image 3">
      </div>
    </div>
  </div>
</body>
</html>
